# Heygem - Heygenのオープンソース代替品 [【英語に切り替え】](./README.md) [【中国語に切り替え】](./README_zh.md)

## 【お知らせ】
HeygemデジタルヒューマンクローンインテリジェントエージェントとプラグインがCozeプラットフォームに正常にリリースされました。複雑なデプロイメントは不要で、初心者ユーザーでも簡単に始めて直接使用できます。

ここをクリックしてCozeストア体験に即アクセス👉[シリコンベースのインテリジェントデジタルヒューマンクローンエージェント](https://www.coze.cn/store/agent/7488696243959431206?bid=6ftfk9dtg0g12) | [シリコンベースのインテリジェントデジタルヒューマンクローンプラグイン](https://www.coze.cn/store/plugin/7488926246634782746)

操作ビデオを見るためにコードをスキャン

<img src="./README_zh.assets/coze-video.png" width="50%">

## 【新しいUbuntuバージョン通知】

**Ubuntuバージョン正式リリース**

1. 現在、Ubuntu 22.04 Desktopバージョン（カーネル6.8.0-52-generic）の適応と検証作業が完了しました。他のLinuxバージョンの互換性テストはまだ行われていません。
2. クライアントプログラムインターフェースの国際化（英語）を追加しました。
3. いくつかの既知の問題を修正しました
   - #304
   - #292
4. [Ubuntu22.04インストールドキュメント](https://github.com/GuijiAI/HeyGem.ai/blob/main/README_zh.md#ubuntu2204-%E5%AE%89%E8%A3%85)

## 開発者パートナーへの重要なお知らせ

**親愛なるHeygemオープンソースコミュニティメンバーの皆様：**

Heygemデジタルヒューマンオープンソースプロジェクトへの熱心な関心と積極的な参加に心から感謝いたします！一部の開発者がローカルデプロイメントの際に課題に直面していることに気付きました。異なるシナリオのニーズにより良く対応するために、2つの並行サービスソリューションをお知らせします：

| **プロジェクト** | **HeyGemオープンソースローカルデプロイメント**                                                             | **デジタルヒューマン/クローン音声APIサービス**                                              |
| -------- | ---------------------------------------------------------------------------------- | ------------------------------------------------------------------------- |
| 使用方法 | オープンソースローカルデプロイメント                                                                       | 高速クローンAPIサービス                                                           |
| 推奨     | 技術ユーザー                                                                         | ビジネスユーザー                                                                |
| 技術的ハードル | 深層学習フレームワークの経験がある/深いカスタマイズを追求する/コミュニティ共創に参加したい開発者                       | 迅速なビジネス統合/上位アプリケーション開発に集中/商用シナリオに企業レベルのSLA保証が必要                   |
| ハードウェア要件 | GPUサーバーを購入する必要があります                                                                  | GPUサーバーを購入する必要はありません                                                         |
| カスタマイズ   | コードを自分のニーズに合わせて変更および拡張でき、ソフトウェアの機能と動作を完全に制御できます                   | ソースコードを直接変更することはできず、APIが提供するインターフェースを通じて機能を拡張することしかできません。柔軟性はオープンソースプロジェクトほどではありません |
| 技術サポート | コミュニティサポート                                                                           | 動的拡張サポート + 専門的な技術対応チーム                                           |
| メンテナンスコスト | 高いメンテナンスコスト                                                                         | 簡単なメンテナンス                                                                  |
| 口形効果 | 使用可能な効果                                                                           | 驚異的で高解像度の効果                                                          |
| 商用ライセンス | グローバルな無料商用利用をサポート（ユーザー数が10万人を超える企業または年間収益が1000万ドルを超える企業は商用ライセンス契約を締結する必要があります） | 商用利用が可能                                                                    |
| イテレーション速度 | 更新が遅く、バグ修正はコミュニティに依存                                                            | 最新のモデル/アルゴリズムが優先され、問題解決が迅速                                         |

私たちは常にオープンソースの精神を守り、APIサービスの提供は異なるニーズを持つ開発者により完全なソリューションマトリックスを提供することを目的としています。どの方法を選んでも、James@toolwiz.comを通じて技術サポートドキュメントをいつでも入手できます。デジタルヒューマン技術の普及発展を共に推進することを楽しみにしています！

**シリコンベースのインテリジェント開発チーム**

<a href="https://mp.weixin.qq.com/s/vKiBR85E7JyRkr6CxLCppA?mpshare=1&scene=1&srcid=0319sszkopZO6870sGsU0TFc&sharer_shareinfo=cac5ec3bfa62ed558552c7c022821613&sharer_shareinfo_first=cac5ec3bfa62ed558552c7c022821613&from=industrynews#rd" target="_blank">ゼロから始めて、HeyGemオープンソースAIデジタルヒューマンを作成する方法を手取り足取り教えます！</a>

[**高速クローンAPI**](https://app.guiji.cn/platform) | [**APIドキュメントセンター**](https://guiji.cn/digital-docs/introduce/)

[**リアルタイムインタラクションSDK**](https://app.guiji.cn/platform) | [**SDKドキュメントセンター**](https://guiji.cn/duix-light-document/introduce/)

[**ローカルリアルタイムインタラクション（realtime）duix.aiオープンソースアドレス**](https://github.com/GuijiAI/duix.ai) |
[**Androidバージョン**](https://github.com/GuijiAI/duix.ai/blob/main/duix-android/dh_aigc_android/README.md) |
[**IOSバージョン**](https://github.com/GuijiAI/duix.ai/blob/main/duix-ios/GJLocalDigitalDemo/GJLocalDigitalSDK.md)

<img src="./README_zh.assets/cb10263a14cc826e22c2be4bcae01a89.jpg" width="50%">

## オープンソース共創·栄光の共有

Heygemをオープンソース化して以来、世界中のギークたちはコードの宇宙でデジタルアバターマトリックスを照らし、各コミットが未来を再構築しています！しかし、喜びは一人で楽しむよりも共有する方が良いです—今、すべての専門家を「オープンソース共創計画」に招待し、AIの創造力をすべての人に提供し、中国のAI艦隊を星々へと導くことを目指しています！

1. 共創コンテンツの方向性

    Heygemのデプロイメントチュートリアル、最適化ガイド、実践事例などの高品質なビデオや記事を共有（Bilibili、Douyin、Xiaohongshu、WeChat公式アカウント、Zhihuなど）

2. オープンソース共創特別報酬プール（現金報酬！）

    （1）基本報酬

       コンテンツが20〜100の「いいね」を獲得すると、【Heygem.aiマスター賞】と20元の現金赤封筒が授与されます。

       コンテンツが100以上の「いいね」を獲得すると、【Heygem.ai神賞】と50元の現金赤封筒が授与されます。

    （2）特別な成果：

        月間MVPはオープンソース殿堂デジタルバッジを解除します（永久にチェーン上に記録されます）。

3. 参加方法

     あなたの創造性をカスタマーサービスの女性に送信し、「名前+999」とメモを付けて友達を追加します。

<img src="./README_zh.assets/2025-03-20_14-38-00.jpg" width="50%">


## 優れた共創作品展

[HeyGemデジタルヒューマンワンクリックスタート、8Gビデオメモリ使用可能、モデルサイズ10G、100Gのハードディスクスペース不要、Dドライブ不要、Dockerシングルイメージベース、シリコンベースのオープンソース](https://www.bilibili.com/video/BV1awQqYZEqB/?spm_id_from=333.337.search-card.all.click&vd_source=618f44772c5dafb47317bb728505d79c)

[Aiデジタルヒューマン16 - ローカルデプロイメント！最も人気のあるオープンソースデジタルヒューマンHeyGemゼロベースのハンズオンティーチングセットアップチュートリアル、20％生成スタックソリューション、完全な簡略化プロセスとサポートファイル - T8 ComfyUIチュートリアル](https://www.bilibili.com/video/BV1ACQSYEErF/?spm_id_from=333.337.search-card.all.click&vd_source=618f44772c5dafb47317bb728505d79c)

[Heygemオープンソースが歴史を目撃しました！サイバー労働者革命！](https://www.bilibili.com/video/BV1R3QpYsEY6/?spm_id_from=333.337.search-card.all.click&vd_source=618f44772c5dafb47317bb728505d79c)

[デジタルヒューマンプロジェクトHeygemローカルデプロイメントチュートリアル](https://www.bilibili.com/video/BV1eWQ6YgEcp/?spm_id_from=333.337.search-card.all.click&vd_source=618f44772c5dafb47317bb728505d79c)

[とても魅力的！有料からオープンソースへ、AIデジタルヒューマンが新しい時代を開く](http://xhslink.com/a/rQPYqoDSRih8)

[オープンソースの無料デジタルヒューマンが登場、無制限の回数、迅速なクローン](http://xhslink.com/a/tX3p5V5tajh8)

[AIデジタルヒューマンが無料に！GitHubのホットプロジェクトがあなたのコンピュータで実行できます](http://xhslink.com/a/8UT1kQ7vxjh8)

[最も人気のある無料のAIデジタルヒューマン、HeyGem V1.0.3、最新の更新、一括統合パッケージ！超強力なリップシンク効果、速度アップ、長いビデオをサポート、バッチ生成、8Gビデオメモリ使用可能！](https://www.bilibili.com/video/BV1SkoCYpEwh/?share_source=copy_web&vd_source=c38dcdb72a68f2a4e0b3c0f4f9a5a03c)

[**HeyGemワンクリックパッケージWindows直接実行Docker不要シリコンベースのオープンソースデジタルヒューマン**](https://www.bilibili.com/video/BV1ZgovYGE3u/)

## 紹介

<img src="README_zh.assets/image-20250304114114272.png">

Heygemは、Windowsシステム向けに設計された完全オフラインのビデオ合成ツールで、外観と声を正確にクローンし、あなたのイメージをデジタル化します。テキストと音声を使用して仮想アバターを駆動し、ビデオを作成できます。インターネット接続は不要で、プライバシーを保護しながら便利で効率的なデジタル体験を楽しむことができます。

- コア機能
  - 正確な外観と声のクローン：高度なAIアルゴリズムを使用して、人間の顔の特徴を高精度でキャプチャし、リアルな仮想モデルを構築します。また、声を正確にクローンし、人間の声の微妙な特徴をキャプチャして再現し、さまざまな声のパラメータ設定をサポートし、非常に似たクローン効果を作成できます。
  - テキストと音声で仮想アバターを駆動：自然言語処理技術を使用してテキストコンテンツを理解し、テキストを自然で流暢な音声に変換して仮想アバターを駆動します。音声入力も直接使用でき、仮想アバターが音声のリズムやイントネーションに基づいて対応する動作や表情を行うことができ、仮想アバターのパフォーマンスをより自然で生き生きとしたものにします。
  - 効率的なビデオ合成：デジタルヒューマンのビデオ画像と音声を高度に同期させ、自然でスムーズなリップシンクを実現し、音声とビデオの同期効果をインテリジェントに最適化します。
  - 多言語サポート：スクリプトは8つの言語（英語、日本語、韓国語、中国語、フランス語、ドイツ語、アラビア語、スペイン語）をサポートします。
- 主要な利点
  - 完全オフライン操作：インターネット接続不要で、ユーザープライバシーを効果的に保護し、ユーザーが安全で独立した環境で創作を行うことができ、ネットワーク伝送中のデータ漏洩のリスクを回避します。
  - ユーザーフレンドリー：クリーンで直感的なインターフェース、技術的な背景がない初心者でも簡単に使用でき、ソフトウェアの使用方法をすぐに習得し、デジタルヒューマンの創作の旅を始めることができます。
  - 複数のモデルサポート：複数のモデルのインポートをサポートし、ワンクリックスタートパッケージを通じて管理でき、異なる創作ニーズやアプリケーションシナリオに応じて適切なモデルを選択することができます。
- 技術サポート
  - 声のクローン技術：人工知能などの高度な技術を使用して、与えられた声のサンプルに基づいて類似または同一の声を生成する技術で、音声の文脈、イントネーション、速度などをカバーします。
  - 自動音声認識：人間の音声の語彙内容をコンピュータが読み取れる入力（テキスト形式）に変換する技術で、コンピュータが人間の話す内容を「理解」できるようにします。
  - コンピュータビジョン技術：ビデオ合成における視覚処理に使用され、顔認識やリップシンク分析などを含み、仮想アバターのリップシンクが音声やテキストコンテンツと一致するようにします。

## 依存関係

1. Nodejs 18
2. Dockerイメージ
   - docker pull guiji2025/fun-asr
   - docker pull guiji2025/fish-speech-ziming
   - docker pull guiji2025/heygem.ai

## Windowsインストール

### 前提条件

1. Dドライブが必要：主にデジタルヒューマンやプロジェクトデータの保存に使用
   - 空き容量要件：30GB以上
2. Cドライブ：サービスイメージファイルの保存に使用

   - 空き容量要件：100GB以上
   - 100GB未満の場合、Dockerをインストールした後、以下の場所で100GB以上の空き容量がある別のディスクフォルダを選択できます。

     ![output](README_zh.assets/output.png)

3. システム要件：
   - 現在、Windows 10 19042.1526以降をサポート
4. 推奨構成：
   - CPU：第13世代インテルCore i5-13400F
   - メモリ：32GB以上
   - グラフィックスカード：RTX 4070
5. NVIDIAグラフィックスカードがあり、ドライバが正しくインストールされていることを確認してください

   NVIDIAドライバダウンロードリンク：https://www.nvidia.cn/drivers/lookup/

   ![nvidia](README_zh.assets/nvidia.png)

### Windows Dockerのインストール

1. コマンド`wsl --list --verbose`を使用してWSLがインストールされているか確認します。以下のように表示される場合、すでにインストールされているため、追加のインストールは不要です。

   ![wsl-list](README_zh.assets/wsl-list.png)

> - WSLインストールコマンド：`wsl --install`
> - ネットワークの問題で失敗することがあります。複数回試してください。
> - インストール中に新しいユーザー名とパスワードを設定し、覚えておいてください。

2. `wsl --update`を使用してWSLを更新します。

   ![updatewsl](README_zh.assets/updatewsl.png)

3. [Windows用Dockerをダウンロード](https://www.docker.com/)し、CPUアーキテクチャに基づいて適切なインストールパッケージを選択します。

4. このインターフェースが表示されたら、インストールが成功したことを示します。

   ![61eb4c19-3e7a-4791-a266-de4209690cbd](README_zh.assets/61eb4c19-3e7a-4791-a266-de4209690cbd.png)

5. Dockerを実行します

   ![shortcut](README_zh.assets/shortcut.png)

6. 初回実行時に契約を受け入れ、ログインをスキップします

   ![accept](README_zh.assets/accept.png)

   ![576746d5-5215-4973-b1ca-c8d7409a6403](README_zh.assets/576746d5-5215-4973-b1ca-c8d7409a6403.png)

   ![9a10b7b2-1eea-48c1-b7af-34129fe04446](README_zh.assets/9a10b7b2-1eea-48c1-b7af-34129fe04446.png)

### サーバーのインストール

Dockerを使用してインストールし、docker-composeは以下の通りです：

1. `docker-compose.yml`ファイルは`/deploy`ディレクトリにあります。
2. `/deploy`ディレクトリで`docker-compose up -d`を実行します。<u>liteバージョンを使用する場合は、`docker-compose -f docker-compose-lite.yml up -d`を実行します</u>
3. 忍耐強く待ちます（約30分、速度はネットワークに依存します）。ダウンロードには約70GBのトラフィックが消費されるため、WiFiを使用してください。
4. Dockerに3つのサービスが表示されたら、成功を示します

   ![e29d1922-7c58-46b4-b1e9-961f853f26d4](README_zh.assets/e29d1922-7c58-46b4-b1e9-961f853f26d4.png)

### クライアント

1. [公式に構築されたインストールパッケージ](https://github.com/GuijiAI/HeyGem.ai/releases)を直接ダウンロードします
2. `HeyGem-x.x.x-setup.exe`をダブルクリックしてインストールします

## Ubuntu 22.04インストール

### 推奨構成

- CPU：第13世代インテルCore i5-13400F
- メモリ：32GB以上（必須）
- グラフィックスカード：RTX-4070（NVIDIAグラフィックスカードがあり、ドライバが正しくインストールされていることを確認してください）
- ハードディスク：100GB以上の空き容量

### Dockerのインストール

> まず、`docker --version`を使用してDockerがインストールされているか確認します。インストールされている場合は、以下の手順をスキップします。

```bash
sudo apt update
sudo apt install docker.io
sudo apt install docker-compose
```

### グラフィックスカードドライバのインストール

1. 公式ドキュメントを参考にしてグラフィックスカードドライバをインストールします[https://www.nvidia.cn/drivers/lookup/](https://www.nvidia.cn/drivers/lookup/)

    > インストール後、`nvidia-smi`コマンドを実行し、グラフィックスカード情報が表示されたら、インストールが成功したことを示します。

2. NVIDIA Container Toolkitのインストール

    NVIDIA Container Toolkitは、DockerがNVIDIA GPUを使用するために必要なツールです。インストール手順は以下の通りです：
    - NVIDIAパッケージリポジトリを追加：
      ```bash
      distribution=$(. /etc/os-release;echo $ID$VERSION_ID) \
        && curl -s -L https://nvidia.github.io/libnvidia-container/gpgkey | sudo apt-key add - \
        && curl -s -L https://nvidia.github.io/libnvidia-container/$distribution/libnvidia-container.list | sudo tee /etc/apt/sources.list.d/nvidia-container-toolkit.list
      ```
    - パッケージリストを更新し、ツールキットをインストール：
      ```bash
        sudo apt-get update
        sudo apt-get install -y nvidia-container-toolkit
      ```
    - DockerがNVIDIAランタイムを使用するように構成：
      ```bash
        sudo nvidia-ctk runtime configure --runtime=docker
      ```
    - Dockerサービスを再起動：
      ```bash
        sudo systemctl restart docker
      ```

### サーバーのインストール

```bash
cd /deploy
docker-compose -f docker-compose-linux.yml up -d
```

> Windows上でのイメージのプルと同様に、ダウンロードが遅い場合は、国内ミラーソースを指定する必要があります。方法は、`/etc/docker/daemon.json`ファイルに以下を追加します：
>
> ```json
> {
>   "registry-mirrors": [
>     "https://hub.fast360.xyz",
>     "https://hub.littlediary.cn",
>     "https://docker.kejilion.pro",
>     "https://docker.1panelproxy.com"
>   ]
> }
> ```
> 上記の4つのミラーソースは、時間の経過とともに変更される可能性があるため、最新のミラーソースを自分で検索してください。

### クライアント

1. [公式に構築されたインストールパッケージ](https://github.com/GuijiAI/HeyGem.ai/releases)のLinuxバージョンを直接ダウンロードします
2. `HeyGem-x.x.x.AppImage`をダブルクリックして起動します。インストールは不要です

  > リマインダー：Ubuntuシステムで`root`ユーザーを使用してデスクトップにアクセスする場合、`HeyGem-x.x.x.AppImage`をダブルクリックしても実行できないことがあります。ターミナルで`./HeyGem-x.x.x.AppImage --no-sandbox`を実行し、`--no-sandbox`パラメータを追加してください。

## オープンAPI

モデルトレーニングとビデオ合成のAPIを公開しました。Dockerが起動すると、いくつかのポートがローカルに公開され、`http://127.0.0.1`を通じてアクセスできます。

具体的なコードは以下を参照してください：

- src/main/service/model.js
- src/main/service/video.js
- src/main/service/voice.js

### モデルトレーニング

1. ビデオを無音ビデオ+音声に分離
2. 音声を`D:\heygem_data\voice\data`に配置
   > `D:\heygem_data\voice\data`は`guiji2025/fish-speech-ziming`サービスと合意されたもので、docker-composeで変更できます
3. `http://127.0.0.1:18180/v1/preprocess_and_tran`インターフェースを呼び出します
   > パラメータの例：
   >
   > ```json
   > {
   >   "format": ".wav",
   >   "reference_audio": "xxxxxx/xxxxx.wav",
   >   "lang": "zh"
   > }
   > ```
   >
   > レスポンスの例：
   >
   > ```json
   > {
   >   "asr_format_audio_url": "xxxx/x/xxx/xxx.wav",
   >   "reference_audio_text": "xxxxxxxxxxxx"
   > }
   > ```
   >
   > **レスポンス結果を記録し、後続の音声合成で使用します**

### 音声合成

インターフェース：`http://127.0.0.1:18180/v1/invoke`

```json
// リクエストパラメータ
{
  "speaker": "{uuid}", // 一意のUUID
  "text": "xxxxxxxxxx", // 合成するテキストコンテンツ
  "format": "wav", // 固定パラメータ
  "topP": 0.7, // 固定パラメータ
  "max_new_tokens": 1024, // 固定パラメータ
  "chunk_length": 100, // 固定パラメータ
  "repetition_penalty": 1.2, // 固定パラメータ
  "temperature": 0.7, // 固定パラメータ
  "need_asr": false, // 固定パラメータ
  "streaming": false, // 固定パラメータ
  "is_fixed_seed": 0, // 固定パラメータ
  "is_norm": 0, // 固定パラメータ
  "reference_audio": "{voice.asr_format_audio_url}", // 前の「モデルトレーニング」ステップの戻り値
  "reference_text": "{voice.reference_audio_text}" // 前の「モデルトレーニング」ステップの戻り値
}
```

### ビデオ合成

- 合成インターフェース：`http://127.0.0.1:8383/easy/submit`

  ```json
  // リクエストパラメータ
  {
    "audio_url": "{audioPath}", // 音声パス
    "video_url": "{videoPath}", // ビデオパス
    "code": "{uuid}", // 一意のキー
    "chaofen": 0, // 固定値
    "watermark_switch": 0, // 固定値
    "pn": 1 // 固定値
  }
  ```

- 進捗クエリ：`http://127.0.0.1:8383/easy/query?code=${taskCode}`
  > GETリクエスト、パラメータ`taskCode`は上記の合成インターフェース入力の`code`です

## 質問する前の自己チェック手順

1. 3つのサービスがすべてRunning状態であることを確認します

   ![e29d1922-7c58-46b4-b1e9-961f853f26d4](./doc/常見問題.assets/e29d1922-7c58-46b4-b1e9-961f853f26d4.png)

2. マシンにNVIDIAグラフィックスカードがあり、ドライバが正しくインストールされていることを確認します。

   このプロジェクトのすべての計算能力はローカルにあります。NVIDIAグラフィックスカードや適切なドライバがない場合、3つのサービスは起動しません。

3. サーバーとクライアントの両方が最新バージョンに更新されていることを確認します。プロジェクトは新たにオープンソース化され、コミュニティは非常に活発で、更新が頻繁です。あなたの問題は新しいバージョンで解決されているかもしれません。

   - サーバー：`/deploy`ディレクトリに移動し、`docker-compose up -d`を再実行します
   - クライアント：コードを`pull`し、再度`build`します

4. [GitHub Issues](https://github.com/GuijiAI/HeyGem.ai/issues)は継続的に更新されており、問題が解決され、毎日閉じられています。頻繁に確認し、あなたの問題がすでに解決されているかもしれません。

## 質問テンプレート

1. 問題の説明

   再現手順を詳細に説明し、可能であればスクリーンショットを提供します。

2. エラーログの提供

   - クライアントログの取得方法：

     ![image-20250308205954494](./doc/常見問題.assets/image-20250308205954494.png)

   - サーバーログ：

     重要な場所を見つけるか、3つのDockerサービスをクリックし、以下のように「コピー」します。

     ![image-20250308215812201](./doc/常見問題.assets/image-20250308215812201.png)

## お問い合わせ

```
  James@toolwiz.com
```

## ライセンス

[LICENSE](./LICENSE)

## 謝辞

- ASRは[fun-asr](https://github.com/modelscope/FunASR)に基づいています
- TTSは[fish-speech-ziming](https://github.com/fishaudio/fish-speech)に基づいています

## Star History

[![Star History Chart](https://api.star-history.com/svg?repos=GuijiAI/HeyGem.ai&type=Date)](https://www.star-history.com/#GuijiAI/HeyGem.ai&Date)
